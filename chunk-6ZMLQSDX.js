import{Ba as o,Gb as v,Lb as H,Nb as T,Oa as l,Ob as S,Pa as c,Va as D,Wa as f,Za as I,_a as h,gb as w,ha as R,ka as g}from"./chunk-MU7CYOZV.js";var z=["move","copy","link"],p="application/x-dnd",C="application/json",m="Text";function M(n){return n.substr(0,p.length)===p}function _(n){if(n.dataTransfer){let r=n.dataTransfer.types;if(!r)return m;for(let e=0;e<r.length;e++)if(r[e]===m||r[e]===C||M(r[e]))return r[e]}return null}function F(n,r,e){let t=p+(r.type?"-"+r.type:""),d=JSON.stringify(r);try{n.dataTransfer?.setData(t,d)}catch{try{n.dataTransfer?.setData(C,d)}catch{let L=u(z,e);n.dataTransfer&&(n.dataTransfer.effectAllowed=L[0]),n.dataTransfer?.setData(m,d)}}}function x(n,r){let e=_(n);return r===!0?e!==null&&M(e)?JSON.parse(n.dataTransfer?.getData(e)??"{}"):{}:e!==null?JSON.parse(n.dataTransfer?.getData(e)??"{}"):{}}function u(n,r){return r==="all"||r==="uninitialized"?n:n.filter(function(e){return r.toLowerCase().indexOf(e)!==-1})}function B(n,r){let e=r;for(;e.parentNode!==n;){if(!e.parentNode)return null;e=e.parentNode}return e}function k(n,r,e){let t=r.getBoundingClientRect();return e?n.clientX<t.left+t.width/2:n.clientY<t.top+t.height/2}function N(n,r){let e=window.getComputedStyle(r),t=parseFloat(e.paddingTop)||0,d=parseFloat(e.paddingLeft)||0,s=parseFloat(e.borderTopWidth)||0,a=parseFloat(e.borderLeftWidth)||0;return{x:n.offsetX+d+a,y:n.offsetY+t+s}}function j(n,r,e){let t=e(n,r)||{x:0,y:0};n.dataTransfer.setDragImage(r,t.x,t.y)}var i={isDragging:!1,dropEffect:"none",effectAllowed:"all",type:void 0};function Z(n,r,e){i.isDragging=!0,i.dropEffect="none",i.effectAllowed=r,i.type=e,n.dataTransfer&&(n.dataTransfer.effectAllowed=r)}function A(){i.isDragging=!1,i.dropEffect=void 0,i.effectAllowed=void 0,i.type=void 0}function E(n,r){i.isDragging===!0&&(i.dropEffect=r),n.dataTransfer&&(n.dataTransfer.dropEffect=r)}function P(n,r){let e=n.dataTransfer?n.dataTransfer.effectAllowed:"uninitialized",t=u(z,e);return i.isDragging===!0&&(t=u(t,i.effectAllowed)),r&&(t=u(t,r)),t.length===0?"none":n.ctrlKey&&t.indexOf("copy")!==-1?"copy":n.altKey&&t.indexOf("link")!==-1?"link":t[0]}function b(n){if(i.isDragging===!0)return i.type;let r=_(n);if(r!==null&&!(r===m||r===C))return r.substr(p.length+1)||void 0}function y(){return i.isDragging===!1}var O=i;var ee=(()=>{class n{dndDraggable;dndEffectAllowed="copy";dndType;dndDraggingClass="dndDragging";dndDraggingSourceClass="dndDraggingSource";dndDraggableDisabledClass="dndDraggableDisabled";dndDragImageOffsetFunction=N;dndStart=new l;dndDrag=new l;dndEnd=new l;dndMoved=new l;dndCopied=new l;dndLinked=new l;dndCanceled=new l;draggable=!0;dndHandle;dndDragImageElementRef;dragImage;isDragStarted=!1;elementRef=g(o);renderer=g(D);ngZone=g(c);set dndDisableIf(e){this.draggable=!e,this.draggable?this.renderer.removeClass(this.elementRef.nativeElement,this.dndDraggableDisabledClass):this.renderer.addClass(this.elementRef.nativeElement,this.dndDraggableDisabledClass)}set dndDisableDragIf(e){this.dndDisableIf=e}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.elementRef.nativeElement.addEventListener("drag",this.dragEventHandler)})}ngOnDestroy(){this.elementRef.nativeElement.removeEventListener("drag",this.dragEventHandler),this.isDragStarted&&A()}onDragStart(e){if(!this.draggable)return!1;if(this.dndHandle!=null&&e._dndUsingHandle==null)return e.stopPropagation(),!1;Z(e,this.dndEffectAllowed,this.dndType),this.isDragStarted=!0,F(e,{data:this.dndDraggable,type:this.dndType},O.effectAllowed),this.dragImage=this.determineDragImage(),this.renderer.addClass(this.dragImage,this.dndDraggingClass),(this.dndDragImageElementRef!=null||e._dndUsingHandle!=null)&&j(e,this.dragImage,this.dndDragImageOffsetFunction);let t=this.renderer.listen(this.elementRef.nativeElement,"drag",()=>{this.renderer.addClass(this.elementRef.nativeElement,this.dndDraggingSourceClass),t()});return this.dndStart.emit(e),e.stopPropagation(),setTimeout(()=>{this.renderer.setStyle(this.dragImage,"pointer-events","none")},100),!0}onDrag(e){this.dndDrag.emit(e)}onDragEnd(e){if(!this.draggable||!this.isDragStarted)return;let t=O.dropEffect;this.renderer.setStyle(this.dragImage,"pointer-events","unset");let d;switch(t){case"copy":d=this.dndCopied;break;case"link":d=this.dndLinked;break;case"move":d=this.dndMoved;break;default:d=this.dndCanceled;break}d.emit(e),this.dndEnd.emit(e),A(),this.isDragStarted=!1,this.renderer.removeClass(this.dragImage,this.dndDraggingClass),window.setTimeout(()=>{this.renderer.removeClass(this.elementRef.nativeElement,this.dndDraggingSourceClass)},0),e.stopPropagation()}registerDragHandle(e){this.dndHandle=e}registerDragImage(e){this.dndDragImageElementRef=e}dragEventHandler=e=>this.onDrag(e);determineDragImage(){return typeof this.dndDragImageElementRef<"u"?this.dndDragImageElementRef.nativeElement:this.elementRef.nativeElement}static \u0275fac=function(t){return new(t||n)};static \u0275dir=h({type:n,selectors:[["","dndDraggable",""]],hostVars:1,hostBindings:function(t,d){t&1&&v("dragstart",function(a){return d.onDragStart(a)})("dragend",function(a){return d.onDragEnd(a)}),t&2&&w("draggable",d.draggable)},inputs:{dndDraggable:"dndDraggable",dndEffectAllowed:"dndEffectAllowed",dndType:"dndType",dndDraggingClass:"dndDraggingClass",dndDraggingSourceClass:"dndDraggingSourceClass",dndDraggableDisabledClass:"dndDraggableDisabledClass",dndDragImageOffsetFunction:"dndDragImageOffsetFunction",dndDisableIf:"dndDisableIf",dndDisableDragIf:"dndDisableDragIf"},outputs:{dndStart:"dndStart",dndDrag:"dndDrag",dndEnd:"dndEnd",dndMoved:"dndMoved",dndCopied:"dndCopied",dndLinked:"dndLinked",dndCanceled:"dndCanceled"}})}return n})(),U=(()=>{class n{elementRef;constructor(e){this.elementRef=e}ngOnInit(){this.elementRef.nativeElement.style.pointerEvents="none"}static \u0275fac=function(t){return new(t||n)(f(o))};static \u0275dir=h({type:n,selectors:[["","dndPlaceholderRef",""]]})}return n})(),ne=(()=>{class n{ngZone;elementRef;renderer;dndDropzone="";dndEffectAllowed="uninitialized";dndAllowExternal=!1;dndHorizontal=!1;dndDragoverClass="dndDragover";dndDropzoneDisabledClass="dndDropzoneDisabled";dndDragover=new l;dndDrop=new l;dndPlaceholderRef;placeholder=null;disabled=!1;constructor(e,t,d){this.ngZone=e,this.elementRef=t,this.renderer=d}set dndDisableIf(e){this.disabled=e,this.disabled?this.renderer.addClass(this.elementRef.nativeElement,this.dndDropzoneDisabledClass):this.renderer.removeClass(this.elementRef.nativeElement,this.dndDropzoneDisabledClass)}set dndDisableDropIf(e){this.dndDisableIf=e}ngAfterViewInit(){this.placeholder=this.tryGetPlaceholder(),this.removePlaceholderFromDOM(),this.ngZone.runOutsideAngular(()=>{this.elementRef.nativeElement.addEventListener("dragenter",this.dragEnterEventHandler),this.elementRef.nativeElement.addEventListener("dragover",this.dragOverEventHandler),this.elementRef.nativeElement.addEventListener("dragleave",this.dragLeaveEventHandler)})}ngOnDestroy(){this.elementRef.nativeElement.removeEventListener("dragenter",this.dragEnterEventHandler),this.elementRef.nativeElement.removeEventListener("dragover",this.dragOverEventHandler),this.elementRef.nativeElement.removeEventListener("dragleave",this.dragLeaveEventHandler)}onDragEnter(e){if(e._dndDropzoneActive===!0){this.cleanupDragoverState();return}if(e._dndDropzoneActive==null){let d=document.elementFromPoint(e.clientX,e.clientY);this.elementRef.nativeElement.contains(d)&&(e._dndDropzoneActive=!0)}let t=b(e);this.isDropAllowed(t)&&e.preventDefault()}onDragOver(e){if(e.defaultPrevented)return;let t=b(e);if(!this.isDropAllowed(t))return;this.checkAndUpdatePlaceholderPosition(e);let d=P(e,this.dndEffectAllowed);if(d==="none"){this.cleanupDragoverState();return}e.preventDefault(),E(e,d),this.dndDragover.emit(e),this.renderer.addClass(this.elementRef.nativeElement,this.dndDragoverClass)}onDrop(e){try{let t=b(e);if(!this.isDropAllowed(t))return;let d=x(e,y());if(!this.isDropAllowed(d.type))return;e.preventDefault();let s=P(e);if(E(e,s),s==="none")return;let a=this.getPlaceholderIndex();if(a===-1)return;this.dndDrop.emit({event:e,dropEffect:s,isExternal:y(),data:d.data,index:a,type:t}),e.stopPropagation()}finally{this.cleanupDragoverState()}}onDragLeave(e){if(e.preventDefault(),e.stopPropagation(),e._dndDropzoneActive==null&&this.elementRef.nativeElement.contains(e.relatedTarget)){e._dndDropzoneActive=!0;return}this.cleanupDragoverState(),E(e,"none")}dragEnterEventHandler=e=>this.onDragEnter(e);dragOverEventHandler=e=>this.onDragOver(e);dragLeaveEventHandler=e=>this.onDragLeave(e);isDropAllowed(e){if(this.disabled||y()&&!this.dndAllowExternal)return!1;if(!this.dndDropzone||!e)return!0;if(!Array.isArray(this.dndDropzone))throw new Error("dndDropzone: bound value to [dndDropzone] must be an array!");return this.dndDropzone.indexOf(e)!==-1}tryGetPlaceholder(){return typeof this.dndPlaceholderRef<"u"?this.dndPlaceholderRef.elementRef.nativeElement:this.elementRef.nativeElement.querySelector("[dndPlaceholderRef]")}removePlaceholderFromDOM(){this.placeholder!==null&&this.placeholder.parentNode!==null&&this.placeholder.parentNode.removeChild(this.placeholder)}checkAndUpdatePlaceholderPosition(e){if(this.placeholder===null)return;this.placeholder.parentNode!==this.elementRef.nativeElement&&this.renderer.appendChild(this.elementRef.nativeElement,this.placeholder);let t=B(this.elementRef.nativeElement,e.target);if(t===null||t===this.placeholder)return;k(e,t,this.dndHorizontal)?t.previousSibling!==this.placeholder&&this.renderer.insertBefore(this.elementRef.nativeElement,this.placeholder,t):t.nextSibling!==this.placeholder&&this.renderer.insertBefore(this.elementRef.nativeElement,this.placeholder,t.nextSibling)}getPlaceholderIndex(){if(this.placeholder===null)return;let e=this.elementRef.nativeElement;return Array.prototype.indexOf.call(e.children,this.placeholder)}cleanupDragoverState(){this.renderer.removeClass(this.elementRef.nativeElement,this.dndDragoverClass),this.removePlaceholderFromDOM()}static \u0275fac=function(t){return new(t||n)(f(c),f(o),f(D))};static \u0275dir=h({type:n,selectors:[["","dndDropzone",""]],contentQueries:function(t,d,s){if(t&1&&H(s,U,5),t&2){let a;T(a=S())&&(d.dndPlaceholderRef=a.first)}},hostBindings:function(t,d){t&1&&v("drop",function(a){return d.onDrop(a)})},inputs:{dndDropzone:"dndDropzone",dndEffectAllowed:"dndEffectAllowed",dndAllowExternal:"dndAllowExternal",dndHorizontal:"dndHorizontal",dndDragoverClass:"dndDragoverClass",dndDropzoneDisabledClass:"dndDropzoneDisabledClass",dndDisableIf:"dndDisableIf",dndDisableDropIf:"dndDisableDropIf"},outputs:{dndDragover:"dndDragover",dndDrop:"dndDrop"}})}return n})();var te=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=I({type:n});static \u0275inj=R({})}return n})();export{ee as a,U as b,ne as c,te as d};
